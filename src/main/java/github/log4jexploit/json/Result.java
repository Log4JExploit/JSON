package github.log4jexploit.json;

import java.util.function.Consumer;

public class Result<T> {
    private final boolean failed;
    private final T result;

    private Result(boolean failed, T result) {
        this.failed = failed;
        this.result = result;
    }

    private Result(boolean failed) {
        this.failed = failed;
        this.result = null;
    }

    public Result<T> onFail(Runnable action) {
        if(failed) {
            action.run();
        }
        return this;
    }

    public Result<T> onFail(Consumer<T> action) {
        if(failed) {
            action.accept(result);
        }
        return this;
    }

    public Result<T> onSuccess(Runnable action) {
        if(!failed) {
            action.run();
        }
        return this;
    }

    public Result<T> onSuccess(Consumer<T> action) {
        if(!failed) {
            action.accept(result);
        }
        return this;
    }

    public Result<T> anyway(Runnable action) {
        action.run();
        return this;
    }

    public Result<T> anyway(Consumer<T> action) {
        action.accept(this.result);
        return this;
    }

    public boolean hasFailed() {
        return this.failed;
    }

    public boolean hasSucceeded() {
        return !this.failed;
    }

    public T get() {
        return result;
    }

    public static <T> Result<T> with(T result) {
        return new Result<>(false, result);
    }

    public static <T> Result<T> failed() {
        return new Result<>(true);
    }
}